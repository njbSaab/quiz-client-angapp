import{c as R,d as M,f as C,g as P,h as H,i as j,m as ie}from"./chunk-OFJJUEDR.js";import{a as re}from"./chunk-NU253WM4.js";import{$ as Z,Aa as ne,B as k,Ba as y,D as U,E as s,F as d,K as _,L as c,M as F,O as o,P as r,Q as u,T as L,U as p,V as g,Y as A,Z as l,_ as z,ba as f,ca as G,da as J,f as T,ga as D,j as N,m as Y,ma as X,n as b,na as K,oa as W,q as v,qa as S,r as w,s as I,u as E,v as Q,w as B,wa as ee,x as O,ya as te,za as q}from"./chunk-U22UWOTM.js";var oe=(()=>{class t{timerSubscription=null;totalTime=30;currentTime$=new T(this.totalTime);progress$=new T(0);startTimer(){this.resetTimer();let e=100,n=this.totalTime*(1e3/e),i=0;this.timerSubscription=N(e).subscribe(()=>{i++;let a=this.totalTime-Math.floor(i*e/1e3),h=i/n*100;a>=0?(this.currentTime$.next(a),this.progress$.next(h)):this.stopTimer()})}resetTimer(){this.stopTimer(),this.currentTime$.next(this.totalTime),this.progress$.next(0)}stopTimer(){this.timerSubscription&&(this.timerSubscription.unsubscribe(),this.timerSubscription=null),this.currentTime$.next(this.totalTime),this.progress$.next(0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var se=(()=>{class t{el;colors=["bg-gradinet-red-90","bg-gradient-regular-90","bg-gradinet-accent-0","bg-gradient-regular-0","bg-gradinet-red-0"];currentIndex=-1;constructor(e){this.el=e,this.el.nativeElement.style.background="#282a36"}onClick(){this.currentIndex>=0&&this.el.nativeElement.classList.remove(this.colors[this.currentIndex]),this.currentIndex=(this.currentIndex+1)%this.colors.length,this.el.nativeElement.classList.add(this.colors[this.currentIndex])}static \u0275fac=function(n){return new(n||t)(d(k))};static \u0275dir=I({type:t,selectors:[["","appChangeBackground",""]],hostBindings:function(n,i){n&1&&p("click",function(){return i.onClick()})}})}return t})();var ae=(()=>{class t{el;colors=["oklch(51.01% 0.274 263.83)","oklch(53.18% 0.28 296.97)","oklch(47.66% 0.246 305.88)","oklch(69.02% 0.277 332.77)","oklch(58.42% 0.238 15.34)","oklch(63.32% 0.24 31.68)"];usedColors=[];originalBackground="";constructor(e){this.el=e}onMouseEnter(){this.originalBackground=this.el.nativeElement.style.background||"",this.changeBackground()}onMouseLeave(){this.resetBackground()}changeBackground(){this.colors.length===0&&(this.colors=[...this.usedColors],this.usedColors=[]);let e=Math.floor(Math.random()*this.colors.length),n=this.colors[e];this.usedColors.push(n),this.colors.splice(e,1),this.el.nativeElement.style.background=n}resetBackground(){this.el.nativeElement.style.background=this.originalBackground}static \u0275fac=function(n){return new(n||t)(d(k))};static \u0275dir=I({type:t,selectors:[["","appRandomBackground",""]],hostBindings:function(n,i){n&1&&p("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()})}})}return t})();var he=(t,m,e)=>({"text-error":t,"text-accent":m,"text-primary":e}),fe=t=>["/quiz",t,"result"];function xe(t,m){if(t&1&&u(0,"img",15),t&2){let e=g(3);c("src",e.questions[e.currentQuestionIndex].image,U)}}function ve(t,m){if(t&1&&(o(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",11),u(4,"span"),r()()(),o(5,"div",12)(6,"h3",13),l(7),r(),_(8,xe,1,1,"img",14),r()()),t&2){let e=g(2);c("@questionFadeIn",e.currentQuestionIndex),s(2),F("--value",e.progress),c("ngClass",J(8,he,e.currentTime<5,e.currentTime>=5&&e.currentTime<10,e.currentTime>=10)),s(2),F("--value",e.currentTime),s(3),z(e.questions[e.currentQuestionIndex].text),s(),c("ngIf",e.questions[e.currentQuestionIndex].image)}}function _e(t,m){if(t&1){let e=L();o(0,"li",18),p("click",function(){let i=E(e).$implicit,a=g(3);return Q(a.onAnswerSelect(i))}),l(1),r()}if(t&2){let e=m.$implicit;s(),Z(" ",e.text," ")}}function Ce(t,m){if(t&1&&(o(0,"ul",16),_(1,_e,2,1,"li",17),r()),t&2){let e=g(2);c("@answersFadeIn",e.currentQuestionIndex),s(),c("ngForOf",e.questions[e.currentQuestionIndex]==null?null:e.questions[e.currentQuestionIndex].answers)}}function ye(t,m){if(t&1&&(o(0,"div",3)(1,"div",4)(2,"h1",5),l(3),r(),_(4,ve,9,12,"div",6)(5,Ce,2,2,"ul",7),r()()),t&2){let e=g(),n=A(2);s(3),z(e.quiz.title),s(),c("ngIf",e.currentQuestionIndex<e.questions.length)("ngIfElse",n),s(),c("ngIf",e.isAnswerVisible&&e.currentQuestionIndex<e.questions.length)}}function be(t,m){if(t&1&&(o(0,"p"),l(1),r()),t&2){let e=g(2);s(),z(e.quiz==null?null:e.quiz.finalPage)}}function we(t,m){if(t&1){let e=L();o(0,"div",19)(1,"h2",20),l(2,"\u0412\u0438\u043A\u0442\u043E\u0440\u0438\u043D\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430!"),r(),_(3,be,2,1,"p",21),o(4,"div",22)(5,"button",23),p("click",function(){E(e);let i=g();return Q(i.resetProgress())}),l(6," \u041D\u0430\u0447\u0430\u0442\u044C \u0437\u0430\u043D\u043E\u0432\u043E "),r(),o(7,"button",24),l(8," \u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 "),r()()()}if(t&2){let e=g();s(3),c("ngIf",e.quiz==null?null:e.quiz.finalPage),s(4),c("routerLink",G(2,fe,e.quiz==null?null:e.quiz.id))}}function Ie(t,m){t&1&&(o(0,"div",25),u(1,"span",26)(2,"span",27),o(3,"p",28),l(4,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."),r()())}var ce=(()=>{class t{quizService;route;timerService;userService;router;quiz;questions=[];currentQuestionIndex=0;correctAnswersCount=0;totalPoints=0;currentTime=30;progress=0;isAnswerVisible=!0;constructor(e,n,i,a,h){this.quizService=e,this.route=n,this.timerService=i,this.userService=a,this.router=h}ngOnInit(){this.currentQuestionIndex=0,this.correctAnswersCount=0,this.totalPoints=0,this.timerService.currentTime$.subscribe(n=>{this.currentTime=n,n===0&&this.goToNextQuestion()}),this.timerService.progress$.subscribe(n=>{this.progress=n});let e=Number(this.route.snapshot.paramMap.get("id"));console.log("Quiz ID from route:",e),this.quizService.getQuizById(e).subscribe({next:n=>{if(n){if(this.quiz=n,n.questions.every($=>$.answers&&$.answers.length>0))this.questions=n.questions;else{console.error("\u0412\u043E\u043F\u0440\u043E\u0441\u044B \u043D\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442 \u043E\u0442\u0432\u0435\u0442\u043E\u0432:",n.questions),this.router.navigate(["/quizzes"]);return}let i=localStorage.getItem("currentQuestionIndex"),a=localStorage.getItem("correctAnswersCount"),h=localStorage.getItem("totalPoints");this.currentQuestionIndex=i?+i:0,this.correctAnswersCount=a?+a:0,this.totalPoints=h?+h:0,this.timerService.startTimer()}else console.error("\u041A\u0432\u0438\u0437 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D!"),this.router.navigate(["/quizzes"])},error:n=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043A\u0432\u0438\u0437\u0430:",n),this.router.navigate(["/quizzes"])}})}onAnswerSelect(e){console.log("\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442:",e),e.isCorrect&&(this.correctAnswersCount++,this.totalPoints+=e.points||1,localStorage.setItem("correctAnswersCount",this.correctAnswersCount.toString()),localStorage.setItem("totalPoints",this.totalPoints.toString())),this.isAnswerVisible=!1,setTimeout(()=>{this.goToNextQuestion(),this.isAnswerVisible=!0},500)}goToNextQuestion(){this.currentQuestionIndex++,localStorage.setItem("currentQuestionIndex",this.currentQuestionIndex.toString()),this.currentQuestionIndex>=this.questions.length?(this.timerService.stopTimer(),this.currentTime=0,this.progress=100,this.saveResults()):this.timerService.startTimer()}resetProgress(){this.currentQuestionIndex=0,this.correctAnswersCount=0,this.totalPoints=0,localStorage.removeItem("currentQuestionIndex"),localStorage.removeItem("correctAnswersCount"),localStorage.removeItem("totalPoints"),this.timerService.startTimer()}saveResults(){if(this.quiz){let e={userId:1,quizId:this.quiz.id,score:this.totalPoints,answers:this.questions.map((n,i)=>({questionId:n.id,selectedAnswer:i<this.currentQuestionIndex?n.answers.find(a=>a.isCorrect)?.id:null}))};this.userService.addUserResult(e).subscribe({next:()=>console.log("\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),error:n=>console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432:",n)})}}static \u0275fac=function(n){return new(n||t)(d(ie),d(ee),d(oe),d(re),d(te))};static \u0275cmp=v({type:t,selectors:[["app-quiz-play"]],decls:5,vars:2,consts:[["finished",""],["notFound",""],["class","quiz-play","appChangeBackground","",4,"ngIf","ngIfElse"],["appChangeBackground","",1,"quiz-play"],[1,"container"],[1,"text-center","text-3xl","py-5"],["class","quiz-play-quistion bg-gradient-base-180 flex flex-col items-center justify-center relative quiz-container",4,"ngIf","ngIfElse"],["class","quiz-play-answers-list quiz-container",4,"ngIf"],[1,"quiz-play-quistion","bg-gradient-base-180","flex","flex-col","items-center","justify-center","relative","quiz-container"],[1,"timer-box"],["role","progressbar",1,"radial-progress","bg-base-100",3,"ngClass"],[1,"countdown","font-mono","text-3xl"],[1,"quistion-text"],[1,"text-2xl"],["alt","Question image",3,"src",4,"ngIf"],["alt","Question image",3,"src"],[1,"quiz-play-answers-list","quiz-container"],["appRandomBackground","","class","quiz-play-answers-item bg-gradient-base-0 flex items-center justify-center cursor-pointer text-center",3,"click",4,"ngFor","ngForOf"],["appRandomBackground","",1,"quiz-play-answers-item","bg-gradient-base-0","flex","items-center","justify-center","cursor-pointer","text-center",3,"click"],[1,"text-center"],[1,"text-3xl","py-5"],[4,"ngIf"],[1,"btn-grup","flex","flex-col","gap-3","max-w-[400px]","mx-auto"],[1,"btn","btn-ghost",3,"click"],[1,"btn","btn-success",3,"routerLink"],[1,"loading-container","text-center"],[1,"loading","loading-ring","text-accent","loading-lg"],[1,"loading","loading-ring","text-regular","loading-md"],[1,"text-2xl","text-white","text-center"]],template:function(n,i){if(n&1&&_(0,ye,6,4,"div",2)(1,we,9,4,"ng-template",null,0,D)(3,Ie,5,0,"ng-template",null,1,D),n&2){let a=A(4);c("ngIf",i.quiz)("ngIfElse",a)}},dependencies:[X,K,W,q,se,ae],styles:[".quiz-play[_ngcontent-%COMP%]{min-height:90dvh;margin-top:140px;padding-top:40px;padding-bottom:50px;border-radius:20px}.quiz-play[_ngcontent-%COMP%]   .quiz-play-quistion[_ngcontent-%COMP%]{padding:50px 10px;margin:50px auto 20px;border-radius:20px;min-height:30dvh}.quiz-play[_ngcontent-%COMP%]   .timer-box[_ngcontent-%COMP%]{position:absolute;top:-40px}.quiz-play[_ngcontent-%COMP%]   .quiz-play-answers-list[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;margin:0 auto;gap:10px}.quiz-play[_ngcontent-%COMP%]   .quiz-play-answers-item[_ngcontent-%COMP%]{border-radius:20px;padding:20px 5px}"],data:{animation:[R("questionFadeIn",[P(":increment",[C({opacity:0,transform:"translateY(-30px)"}),M("1000ms ease-out",C({opacity:1,transform:"translateY(0)"}))])]),R("answersFadeIn",[P(":increment",[H(".quiz-play-answers-item",[C({opacity:0,transform:"translateY(20px)"}),j(100,[M("700ms ease-out",C({opacity:1,transform:"translateY(0)"}))])],{optional:!0})]),P(":leave",[H(".quiz-play-answers-item",[j(50,[M("500ms ease-in",C({opacity:0,transform:"translateY(-20px)"}))])],{optional:!0})])])]}})}return t})();var le=()=>["/"],V=()=>({exact:!0}),ke=()=>["/about"],ze=()=>["/contacts"],Be=(()=>{class t{onToggleChange(e){let n=e.target,i=document.querySelector(".nav-menu");i&&(n.checked?(i.classList.add("show"),console.log("Menu opened")):(i.classList.remove("show"),console.log("Menu closed")))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=v({type:t,selectors:[["app-header"]],decls:30,vars:14,consts:[[1,"header"],[1,"navbar","glass"],[1,"navbar-start"],[1,"nav-dropdown","glass","relative"],["tabindex","0","role","button",1,"btn","btn-ghost","btn-circle","accent-hover"],[1,"swap","swap-rotate"],["type","checkbox",3,"change"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 512 512",1,"swap-off","fill-current"],["d","M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 512 512",1,"swap-on","fill-current"],["points","400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"],["tabindex","0",1,"nav-menu","flex","gap-4","bg-accent"],["routerLinkActive","router-link-active",1,"btn","btn-ghost","accent-hover",3,"routerLink","routerLinkActiveOptions"],[1,"navbar-center"],[1,"logo-link","btn-neutral","btn-circle","cursor-pointer",3,"routerLink"],["src","https://i.ibb.co/5X5Jxv13/quiz2.png","alt","",1,"logo"],[1,"navbar-end"],[1,"btn","btn-ghost","btn-circle","accent-hover"],[1,"indicator"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"badge","badge-xs","badge-accent","indicator-item"]],template:function(n,i){n&1&&(o(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5)(6,"input",6),p("change",function(h){return i.onToggleChange(h)}),r(),B(),o(7,"svg",7),u(8,"path",8),r(),o(9,"svg",9),u(10,"polygon",10),r()()(),O(),o(11,"ul",11)(12,"li")(13,"a",12),l(14,"Home"),r()(),o(15,"li")(16,"a",12),l(17,"About"),r()(),o(18,"li")(19,"a",12),l(20,"Contacts"),r()()()()(),o(21,"div",13)(22,"a",14),u(23,"img",15),r()(),o(24,"div",16)(25,"button",17)(26,"div",18),B(),o(27,"svg",19),u(28,"path",20),r(),O(),u(29,"span",21),r()()()()()),n&2&&(s(13),c("routerLink",f(7,le))("routerLinkActiveOptions",f(8,V)),s(3),c("routerLink",f(9,ke))("routerLinkActiveOptions",f(10,V)),s(3),c("routerLink",f(11,ze))("routerLinkActiveOptions",f(12,V)),s(3),c("routerLink",f(13,le)))},dependencies:[q,ne],styles:[".header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{scale:3.1}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{scale:2.3;transition:.3s ease-in-out}.header[_ngcontent-%COMP%]   .logo-link[_ngcontent-%COMP%]{z-index:-1}.header[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{width:80%;border-radius:20px;position:fixed;margin:40px 0;z-index:99}.header[_ngcontent-%COMP%]   .nav-menu[_ngcontent-%COMP%]{position:absolute;top:0;right:1000px;z-index:-1;visibility:hidden;opacity:0;transition:right .3s ease-in-out,opacity .2s ease-in-out}.header[_ngcontent-%COMP%]   .navbar-end[_ngcontent-%COMP%]{z-index:-1}.header[_ngcontent-%COMP%]   .nav-menu.show[_ngcontent-%COMP%]{top:-10px!important;left:100%!important;z-index:999999;visibility:visible;opacity:1;transition:right .3s ease-in-out,opacity .2s ease-in-out;width:fit-content;background:#000;border-radius:20px}.header[_ngcontent-%COMP%]   .nav-dropdown.glass[_ngcontent-%COMP%]{box-shadow:none}.fast-play[_ngcontent-%COMP%]{display:none}"]})}return t})();var Fe=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=v({type:t,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"footer"],[1,"container"],[1,"footer-logo"],[1,"logo-link","btn-neutral"],["src","https://i.ibb.co/5X5Jxv13/quiz2.png","alt","",1,"logo"]],template:function(n,i){n&1&&(o(0,"footer",0)(1,"div",1)(2,"div",2)(3,"a",3),u(4,"img",4),r()()()())},styles:[".footer[_ngcontent-%COMP%]{padding:0;justify-content:center}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:150px;height:150px}"]})}return t})();var ue=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=w({type:t});static \u0275inj=b({imports:[S,y]})}return t})();var Se=[{path:"",component:ce}],tt=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=w({type:t});static \u0275inj=b({imports:[S,y.forChild(Se),ue,y]})}return t})();export{Be as a,Fe as b,ue as c,tt as d};
